---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
import Hero from "../components/Hero.astro";
import About from "../components/About.astro";
import Projects from "../components/Projects";
import Contact from "../components/Contact.astro";
import Separator from "../components/Separator.astro";
import ScrollTop from "../components/ScrollTop.astro";
---

<Layout title="PatrickWebs | Patricio Almada">
  <Nav />
  <Hero />
  <Separator>
    <svg
      class="fill-primary-2 flex-shrink mx-4"
      xmlns="http://www.w3.org/2000/svg"
      width="32"
      height="32"
      viewBox="0 0 256 256"
      ><path
        d="M100 36a28 28 0 1 1 28 28 28 28 0 0 1-28-28Zm115.42 104.78-45.25-51.3a28 28 0 0 0-21-9.48h-42.34a28 28 0 0 0-21 9.48l-45.25 51.3a16 16 0 0 0 22.56 22.69L89 142.7l-19.7 74.88a16 16 0 0 0 29.08 13.35L128 180l29.58 51a16 16 0 0 0 29.08-13.35L167 142.7l25.9 20.77a16 16 0 0 0 22.56-22.69Z"
      ></path></svg
    >
  </Separator>
  <About />
  <Separator>
    <svg
      class="fill-primary-2 flex-shrink mx-4"
      xmlns="http://www.w3.org/2000/svg"
      width="32"
      height="32"
      viewBox="0 0 20 20"
      ><path
        d="M4 16v-2H2v2H1v-5h1v2h2v-2h1v5H4zm3 0v-4H5.6v-1h3.7v1H8v4H7zm3 0v-5h1l1.4 3.4h.1L14 11h1v5h-1v-3.1h-.1l-1.1 2.5h-.6l-1.1-2.5H11V16h-1zm9 0h-3v-5h1v4h2v1zM9.4 4.2 7.1 6.5l2.3 2.3-.6 1.2-3.5-3.5L8.8 3l.6 1.2zm1.2 4.6 2.3-2.3-2.3-2.3.6-1.2 3.5 3.5-3.5 3.5-.6-1.2z"
      ></path></svg
    >
  </Separator>
  <Projects />
  <Separator>
    <svg
      class="stroke-primary-2 flex-shrink mx-4"
      xmlns="http://www.w3.org/2000/svg"
      width="32"
      height="32"
      viewBox="0 0 24 24"
      ><path
        fill="none"
        stroke-width="2"
        d="M1 2h21v16h-8l-8 4v-4H1V2Zm5 8h1v1H6v-1Zm5 0h1v1h-1v-1Zm5 0h1v1h-1v-1Z"
      ></path></svg
    >
  </Separator>
  <Contact />
  <ScrollTop />
</Layout>
<script>
  const sections = document.querySelectorAll("section");
  const menuObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          document.querySelectorAll("nav li a").forEach((link) => {
            const linkClass = link.classList;
            linkClass.remove("bg-primary-2");
            linkClass.remove("md:bg-transparent");
            linkClass.remove("md:text-primary-1");
          });
          const linkHref = document.querySelector(
            "[href='#" + entry.target.id + "']"
          )?.classList;
          linkHref?.add("bg-primary-2");
          linkHref?.add("md:bg-transparent");
          linkHref?.add("md:text-primary-1");
        }
      });
    },
    {
      threshold: 0.2,
    }
  );
  sections.forEach((section) => {
    menuObserver.observe(section);
  });
</script>
<script src="woopra.js" async></script>
